<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Utilities for Graphical Rendering and Fonts Management • gdtools</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Open_Sans-0.4.10/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Utilities for Graphical Rendering and Fonts Management">
<meta name="description" content="Tools are provided to compute metrics of formatted strings and to check the availability of a font. Another set of functions is provided to support the collection of fonts from Google Fonts in a cache. Their use is simple within R Markdown documents and shiny applications but also with graphic productions generated with the ggiraph, ragg and svglite packages or with tabular productions from the flextable package.">
<meta property="og:description" content="Tools are provided to compute metrics of formatted strings and to check the availability of a font. Another set of functions is provided to support the collection of fonts from Google Fonts in a cache. Their use is simple within R Markdown documents and shiny applications but also with graphic productions generated with the ggiraph, ragg and svglite packages or with tabular productions from the flextable package.">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">gdtools</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.4.5.005</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/davidgohel/gdtools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="gdtools">gdtools<a class="anchor" aria-label="anchor" href="#gdtools"></a>
</h1></div>
<!-- badges: start -->

<p>The package <code>gdtools</code> provides font metric calculation and font management tools for R packages that produce graphical or tabular outputs. It is used by packages ‘flextable’, ‘ggiraph’, ‘rvg’.</p>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p><code>gdtools</code> was originally designed to compute font metrics for R graphic devices via C-level interfaces (Cairo and FreeType). With the arrival of the ‘systemfonts’ package, font discovery and matching became much simpler and the C interface was no longer needed by other packages.</p>
<p>The package has since been refocused: it still relies on Cairo for device-independent text measurement, but delegates font resolution to ‘systemfonts’. Its role is now entirely at the R level – providing accurate text metrics and making it easy to work with additional fonts (Google Fonts, Liberation fonts) so that outputs look the same across platforms.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the released version of gdtools from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"gdtools"</span><span class="op">)</span></span></code></pre></div>
<p>And the development version from GitHub with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"davidgohel/gdtools"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="font-metrics">Font metrics<a class="anchor" aria-label="anchor" href="#font-metrics"></a>
</h2>
<p>The main function for text measurement is <code><a href="reference/strings_sizes.html">strings_sizes()</a></code>. It returns width, ascent and descent in inches using Cairo text measurement directly.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://davidgohel.github.io/gdtools/">gdtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/strings_sizes.html">strings_sizes</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a string"</span>, <span class="st">"a longer string"</span><span class="op">)</span>,</span>
<span>  fontsize <span class="op">=</span> <span class="fl">24</span>, </span>
<span>  bold <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  italic <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;      width    ascent    descent</span></span>
<span><span class="co">#&gt; 1 1.203939 0.2413737 0.07259115</span></span>
<span><span class="co">#&gt; 2 2.315104 0.2413737 0.07259115</span></span></code></pre></div>
<p>All arguments are vectorized:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/strings_sizes.html">strings_sizes</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"normal"</span>, <span class="st">"bold"</span>, <span class="st">"italic"</span>, <span class="st">"bold-italic"</span><span class="op">)</span>,</span>
<span>  fontsize <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  bold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  italic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;       width    ascent     descent</span></span>
<span><span class="co">#&gt; 1 0.5094401 0.1195475 0.003173828</span></span>
<span><span class="co">#&gt; 2 0.3517253 0.1199544 0.003092448</span></span>
<span><span class="co">#&gt; 3 0.3334147 0.1195475 0.002929688</span></span>
<span><span class="co">#&gt; 4 0.7870280 0.1206868 0.003092448</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="font-management">Font management<a class="anchor" aria-label="anchor" href="#font-management"></a>
</h2>
<div class="section level3">
<h3 id="google-fonts">Google Fonts<a class="anchor" aria-label="anchor" href="#google-fonts"></a>
</h3>
<p>A set of functions is provided to download and cache fonts from ‘Google Fonts’. They can be used in ‘R Markdown’ documents and ‘Shiny’ applications, as well as with graphic outputs generated by ‘ggiraph’, ‘ragg’ and ‘svglite’, or tabular outputs from ‘flextable’.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download and register with systemfonts (cached for future use)</span></span>
<span><span class="fu"><a href="reference/register_gfont.html">register_gfont</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"Open Sans"</span><span class="op">)</span></span></code></pre></div>
<p>Use <code><a href="reference/addGFontHtmlDependency.html">addGFontHtmlDependency()</a></code> to embed a Google Font in an HTML document, and <code><a href="reference/gfontHtmlDependency.html">gfontHtmlDependency()</a></code> to create an <code>htmltools</code> dependency object.</p>
<p>To install a Google Font at the system level (e.g. in a Dockerfile), use <code><a href="reference/install_gfont_script.html">install_gfont_script()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/install_gfont_script.html">install_gfont_script</a></span><span class="op">(</span><span class="st">"Fira Sans"</span>, platform <span class="op">=</span> <span class="st">"debian"</span>, file <span class="op">=</span> <span class="st">"install-font.sh"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="liberation-fonts">Liberation fonts<a class="anchor" aria-label="anchor" href="#liberation-fonts"></a>
</h3>
<p>The package bundles ‘Liberation Sans’, ‘Liberation Serif’ and ‘Liberation Mono’ fonts. They are useful as cross-platform fallback fonts, for visual tests, or when no internet connection is available.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/register_liberationsans.html">register_liberationsans</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/register_liberationserif.html">register_liberationserif</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/register_liberationmono.html">register_liberationmono</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The corresponding <code><a href="reference/liberationsansHtmlDependency.html">liberationsansHtmlDependency()</a></code>, <code><a href="reference/liberationserifHtmlDependency.html">liberationserifHtmlDependency()</a></code> and <code><a href="reference/liberationmonoHtmlDependency.html">liberationmonoHtmlDependency()</a></code> functions provide HTML dependencies for use in Shiny or R Markdown.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=gdtools" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/davidgohel/gdtools/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/davidgohel/gdtools/issues" class="external-link">Report a bug</a></li>
<li>
<a href="https://www.ardata.fr" class="external-link">Visit </a><a href="https://www.ardata.fr" class="external-link"><img alt="ardata" src="https://www.ardata.fr/img/ardata-logo.svg" width="70"></a> website</li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a> | file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing gdtools</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.ardata.fr" class="external-link">David Gohel</a> <br><small class="roles"> Author, maintainer </small>   </li>
<li>Hadley Wickham <br><small class="roles"> Author </small>   </li>
<li>Lionel Henry <br><small class="roles"> Author </small>   </li>
<li>Jeroen Ooms <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-4035-0289" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=gdtools" class="external-link"><img src="https://www.r-pkg.org/badges/version/gdtools" alt="CRAN status"></a></li>
<li><a href="https://github.com/davidgohel/gdtools/actions" class="external-link"><img src="https://github.com/davidgohel/gdtools/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://app.codecov.io/gh/davidgohel/gdtools" class="external-link"><img src="https://codecov.io/gh/davidgohel/gdtools/branch/master/graph/badge.svg" alt="codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>proudly brought to you by <a href="https://www.ardata.fr" class="external-link"><img alt="ardata" src="https://www.ardata.fr/img/ardata-logo.svg" width="70"></a></p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
