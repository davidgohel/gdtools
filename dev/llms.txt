# gdtools

## Font metrics calculation

The package `gdtools` provides functionalities to get font metrics and
to generate base64 encoded string from raster matrix. It is used by
package ‘flextable’ and ‘rvg’ to allow font metric calculation but can
also be used to compute the exact size a text would have with specific
font options (size, bold, italic).

``` r
library(gdtools)
str_extents(c("a string", "a longer string"), 
  fontsize = 24, bold = TRUE, italic = TRUE)
#>           [,1]     [,2]
#> [1,]  86.68359 22.60547
#> [2,] 166.68750 22.60547
```

## Font management

Another set of functions is provided to support the collection of fonts
from ‘Google Fonts’ in a cache. Their use is simple within ‘R Markdown’
documents and ‘shiny’ applications but also with graphic productions
generated with the ‘ggiraph’, ‘ragg’ and ‘svglite’ packages or with
tabular productions from the ‘flextable’ package.

Function
[`register_gfont()`](https://davidgohel.github.io/gdtools/dev/reference/register_gfont.md)
is used to register a font with the system.

``` r
# Download to a user cache and register the font with systemfonts
# no need to download the font again
register_gfont(family = "Open Sans")
```

Function
[`addGFontHtmlDependency()`](https://davidgohel.github.io/gdtools/dev/reference/addGFontHtmlDependency.md)
is used to add a font to a ‘html’ document.

### Utility to install a font

If you need a ‘Google Font’ to be installed on your machine, you can use
[`install_gfont_script()`](https://davidgohel.github.io/gdtools/dev/reference/install_gfont_script.md).
This is a rare use case but can be useful in some specific situations,
e.g. when you need to install a font on a server and make it available
to all users. It can also be useful when you are working with a docker
image and want to install a font when the image is built.

``` r
install_gfont_script("Fira Sans", file = "firafont.sh")
```

You then have to run `./firafont.sh`.

### Font ‘Liberation Sans’

If you don’t have web access, you can use font ‘Liberation Sans’ that is
available when using this package. That can be useful when you are
working with visual tests and don’t want to rely on an internet
connection or when you need a font for a ‘shiny’ application and or
graphics produced with packages ‘ggiraph’, ‘ragg’ or ‘svglite’.

## Installation

You can install the released version of gdtools from
[CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("gdtools")
```

And the development version from
[GitHub](https://github.com/davidgohel/gdtools) with:

``` r
# install.packages("remotes")
remotes::install_github("davidgohel/gdtools")
```

# Package index

## All functions

- [`addGFontHtmlDependency()`](https://davidgohel.github.io/gdtools/dev/reference/addGFontHtmlDependency.md)
  : Use a font in Shiny or Markdown
- [`font_family_exists()`](https://davidgohel.github.io/gdtools/dev/reference/font_family_exists.md)
  : Check if font family exists.
- [`fonts_cache_dir()`](https://davidgohel.github.io/gdtools/dev/reference/fonts_cache_dir.md)
  [`rm_fonts_cache()`](https://davidgohel.github.io/gdtools/dev/reference/fonts_cache_dir.md)
  [`init_fonts_cache()`](https://davidgohel.github.io/gdtools/dev/reference/fonts_cache_dir.md)
  : manage font working directory
- [`gfontHtmlDependency()`](https://davidgohel.github.io/gdtools/dev/reference/gfontHtmlDependency.md)
  : 'Google Font' HTML dependency
- [`install_gfont_script()`](https://davidgohel.github.io/gdtools/dev/reference/install_gfont_script.md)
  : Shell command to install a font from 'Google Fonts'
- [`installed_gfonts()`](https://davidgohel.github.io/gdtools/dev/reference/installed_gfonts.md)
  : List installed 'Google Fonts'
- [`liberationmonoHtmlDependency()`](https://davidgohel.github.io/gdtools/dev/reference/liberationmonoHtmlDependency.md)
  : 'Liberation Mono' Font HTML dependency
- [`liberationsansHtmlDependency()`](https://davidgohel.github.io/gdtools/dev/reference/liberationsansHtmlDependency.md)
  : 'Liberation Sans' Font HTML dependency
- [`liberationserifHtmlDependency()`](https://davidgohel.github.io/gdtools/dev/reference/liberationserifHtmlDependency.md)
  : 'Liberation Serif' Font HTML dependency
- [`m_str_extents()`](https://davidgohel.github.io/gdtools/dev/reference/m_str_extents.md)
  : Compute string extents for a vector of string.
- [`match_family()`](https://davidgohel.github.io/gdtools/dev/reference/match_family.md)
  : Find best family match with systemfonts
- [`register_gfont()`](https://davidgohel.github.io/gdtools/dev/reference/register_gfont.md)
  : Register a 'Google Fonts'
- [`register_liberationmono()`](https://davidgohel.github.io/gdtools/dev/reference/register_liberationmono.md)
  : Register font 'Liberation Mono'
- [`register_liberationsans()`](https://davidgohel.github.io/gdtools/dev/reference/register_liberationsans.md)
  : Register font 'Liberation Sans'
- [`register_liberationserif()`](https://davidgohel.github.io/gdtools/dev/reference/register_liberationserif.md)
  : Register font 'Liberation Serif'
- [`str_metrics()`](https://davidgohel.github.io/gdtools/dev/reference/str_metrics.md)
  : Get font metrics for a string.
- [`strings_sizes()`](https://davidgohel.github.io/gdtools/dev/reference/strings_sizes.md)
  : Compute strings sizes
- [`sys_fonts()`](https://davidgohel.github.io/gdtools/dev/reference/sys_fonts.md)
  : List fonts for 'systemfonts'.
- [`version_freetype()`](https://davidgohel.github.io/gdtools/dev/reference/version_cairo.md)
  [`version_cairo()`](https://davidgohel.github.io/gdtools/dev/reference/version_cairo.md)
  : Version numbers of C libraries

